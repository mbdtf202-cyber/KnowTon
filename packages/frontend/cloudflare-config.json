{
  "name": "KnowTon Platform CDN Configuration",
  "description": "Cloudflare CDN and edge caching configuration for KnowTon Web3 platform",
  "version": "1.0.0",
  
  "cache_rules": {
    "static_assets": {
      "pattern": "\\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot|webp|avif)$",
      "edge_cache_ttl": 31536000,
      "browser_cache_ttl": 31536000,
      "cache_level": "aggressive",
      "cache_by_device_type": false
    },
    "html_pages": {
      "pattern": "\\.(html)$",
      "edge_cache_ttl": 3600,
      "browser_cache_ttl": 0,
      "cache_level": "standard",
      "bypass_cache_on_cookie": true
    },
    "api_responses": {
      "pattern": "/api/.*",
      "edge_cache_ttl": 300,
      "browser_cache_ttl": 60,
      "cache_level": "standard",
      "cache_by_query_string": true
    },
    "nft_metadata": {
      "pattern": "/metadata/.*\\.json$",
      "edge_cache_ttl": 86400,
      "browser_cache_ttl": 3600,
      "cache_level": "aggressive"
    },
    "ipfs_content": {
      "pattern": "/ipfs/.*",
      "edge_cache_ttl": 2592000,
      "browser_cache_ttl": 2592000,
      "cache_level": "aggressive"
    }
  },
  
  "page_rules": [
    {
      "url": "*.knowton.io/*.js",
      "actions": {
        "cache_level": "cache_everything",
        "edge_cache_ttl": 31536000,
        "browser_cache_ttl": 31536000
      }
    },
    {
      "url": "*.knowton.io/*.css",
      "actions": {
        "cache_level": "cache_everything",
        "edge_cache_ttl": 31536000,
        "browser_cache_ttl": 31536000
      }
    },
    {
      "url": "*.knowton.io/api/*",
      "actions": {
        "cache_level": "bypass",
        "disable_performance": false
      }
    },
    {
      "url": "knowton.io/*",
      "actions": {
        "cache_level": "standard",
        "edge_cache_ttl": 3600,
        "browser_cache_ttl": 0,
        "always_use_https": true,
        "ssl": "flexible",
        "automatic_https_rewrites": "on"
      }
    }
  ],
  
  "performance_settings": {
    "minify": {
      "html": true,
      "css": true,
      "js": true
    },
    "brotli": true,
    "http2": true,
    "http3": true,
    "early_hints": true,
    "rocket_loader": false,
    "auto_minify": true,
    "polish": "lossless",
    "mirage": true,
    "image_resizing": true
  },
  
  "security_settings": {
    "always_use_https": true,
    "automatic_https_rewrites": true,
    "opportunistic_encryption": true,
    "tls_1_3": true,
    "min_tls_version": "1.2",
    "ssl_mode": "full_strict"
  },
  
  "worker_routes": [
    {
      "pattern": "knowton.io/api/*",
      "script": "api-cache-worker"
    },
    {
      "pattern": "knowton.io/ipfs/*",
      "script": "ipfs-cache-worker"
    }
  ]
}
